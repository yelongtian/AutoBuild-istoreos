# 视美太 rk3399 IoT-3399E iStoreOS 自动构建



![License](https://img.shields.io/badge/license-MIT-blue.svg)



![Build Status](https://img.shields.io/badge/build-passing-brightgreen.svg)

## 项目介绍

这是一个基于 GitHub Actions 的自动化工作流，用于为视美太 rk3399IoT-3399E 开发板构建 iStoreOS 固件。

### 支持的功能



* **自动化构建**：每周自动构建最新固件

* **多类型构建**：支持 release、debug、custom 三种构建类型

* **自定义配置**：可根据需求调整配置选项

* **产物管理**：自动打包和上传构建产物

* **版本发布**：自动创建 GitHub Release

## 硬件信息

**视美太 rk3399IoT-3399E 开发板规格：**



* 处理器：RK3399 六核（双核 Cortex-A72 + 四核 Cortex-A53）

* 主频：最高 2.0GHz

* GPU：Mali-T860 MP4

* 内存：4GB LPDDR4

* 存储：8GB eMMC

* 网络：双千兆以太网口

* 接口：USB3.0、UART、GPIO 等

* 无线：2.4G/5G WiFi

## 使用方法

### 1. Fork 本仓库

点击右上角的 **Fork** 按钮，将本仓库复制到您的 GitHub 账号下。

### 2. 启动构建

#### 方法一：手动触发



1. 进入您 Fork 后的仓库

2. 点击 **Actions** 标签页

3. 选择 **构建视美太 rk3399IoT-3399E iStoreOS 固件**

4. 点击 **Run workflow** 按钮

5. 选择构建参数并点击 **Run workflow**

#### 方法二：自动构建



* 每周日 00:00（UTC 时间）自动触发构建

* 构建结果会自动发布为 GitHub Release

### 3. 下载固件

构建完成后：



1. 进入 **Actions** 页面

2. 找到对应的构建任务

3. 点击右上角的 **Artifacts** 下载固件包

4. 或在 **Releases** 页面下载稳定版本

## 构建参数说明



| 参数名称              | 说明   | 默认值       | 选项                           |
| ----------------- | ---- | --------- | ---------------------------- |
| `build_type`      | 构建类型 | `release` | `release`, `debug`, `custom` |
| `clean_build`     | 清理构建 | `true`    | `true`, `false`              |
| `upload_artifact` | 上传产物 | `true`    | `true`, `false`              |

## 固件默认配置

### 网络配置



* **管理 IP**：192.168.100.1

* **子网掩码**：255.255.255.0

* **网关**：192.168.100.254

* **DNS**：114.114.114.114, 223.5.5.5

### WiFi 配置



* **2.4G WiFi**：iStoreOS-RK3399-2.4G（无密码）

* **5G WiFi**：iStoreOS-RK3399-5G（无密码）

### 系统配置



* **用户名**：root

* **密码**：password

* **主机名**：iStoreOS-RK3399

* **时区**：Asia/Shanghai

## 包含的功能模块

### 基础功能



* ✅ 路由功能

* ✅ LuCI Web 管理界面

* ✅ DHCP 服务器

* ✅ DNS 缓存

* ✅ 防火墙

* ✅ NAT 转发

### 网络工具



* ✅ 网络诊断工具（ping、traceroute）

* ✅ DDNS 动态域名解析

* ✅ UPnP 自动端口映射

### 存储服务



* ✅ Samba 文件共享

* ✅ FTP 服务器

* ✅ 磁盘管理

### 安全功能



* ✅ 广告过滤（Adbyby Plus）

* ✅ 时间同步服务

* ✅ 防火墙规则

### 应用商店



* ✅ iStore 应用商店

* ✅ 软件包管理

## 自定义配置

### 修改默认配置

您可以通过修改以下文件来自定义固件配置：



1. `.github/workflows/build-istoreos.yml` - 工作流配置

2. `diy-part1.sh` - 源和包配置

3. `diy-part2.sh` - 系统配置

### 添加自定义软件包

在 `diy-part1.sh` 中添加：



```
\# 添加自定义包

git clone https://github.com/your-repo/your-package.git package/your-package
```

在工作流配置中添加：



```
echo "CONFIG\_PACKAGE\_your-package=y" >> .config
```

## 构建输出

构建完成后会生成以下文件：



* `istoreos-rockchip-armv8-YYYYMMDD-xxxxxx.zip` - 固件压缩包

* `istoreos-rockchip-armv8-YYYYMMDD-xxxxxx.tar.gz` - 固件 tar 包

* `firmware_info.txt` - 固件信息文件

## 刷写固件

### 方法一：SD 卡刷写



1. 使用 BalenaEtcher 将 img 文件写入 SD 卡

2. 将 SD 卡插入开发板

3. 开机启动

### 方法二：eMMC 刷写



1. 使用 RK 烧录工具

2. 进入 MaskRom 模式

3. 选择固件文件进行烧录

## 注意事项

### 构建要求



* GitHub Actions 运行时间：约 2-4 小时

* 磁盘空间：至少 20GB

* 内存：至少 8GB

### 常见问题

#### Q: 构建失败怎么办？

A: 检查以下几点：



1. GitHub Actions 配额是否充足

2. 网络连接是否正常

3. 配置文件是否正确

#### Q: 如何增加软件包？

A: 在工作流配置中添加对应的 CONFIG\_PACKAGE\_xxx=y

#### Q: 如何修改默认 IP？

A: 修改 diy-part2.sh 中的 IP 配置

#### Q: 固件刷写后无法启动？

A: 检查固件是否对应正确的硬件版本

## 贡献指南

欢迎提交 PR 和 Issue 来改进这个项目。

### 提交 PR 前请确保：



1. 代码格式正确

2. 功能测试通过

3. 文档更新完整

## 许可证

本项目采用 MIT 许可证，详见 [https://p9-flow-sign.byteimg.com/tos-cn-i-ik7evvg4ik/rc/pc/super\_tool/43a06c4bfc1645bbb9f134a779738008?rcl=202510012242377140D5903D28F23DF2EA\&rk3s=8e244e95\&rrcfp=f512b60b\&x-expires=1760626204\&x-signature=hIPiGj01KmhWcugDykhDCD1wb8Y%3D](https://p9-flow-sign.byteimg.com/tos-cn-i-ik7evvg4ik/rc/pc/super_tool/43a06c4bfc1645bbb9f134a779738008?rcl=202510012242377140D5903D28F23DF2EA\&rk3s=8e244e95\&rrcfp=f512b60b\&x-expires=1760626204\&x-signature=hIPiGj01KmhWcugDykhDCD1wb8Y%3D) 文件。

## 致谢

感谢以下项目和贡献者：



* [iStoreOS](https://github.com/istoreos/istoreos)

* [OpenWRT](https://openwrt.org/)

* [GitHub Actions](https://github.com/features/actions)

* [P3terx 的 Actions-OpenWRT 项目](https://github.com/P3TERX/Actions-OpenWRT)

## 联系方式

如有问题，请提交 Issue 或联系项目维护者。



***

**注意：使用本固件前请仔细阅读相关文档，刷机有风险，操作需谨慎。**

> （注：文档部分内容可能由 AI 生成）
