# 视美太 rk3399IoT-3399E iStoreOS 自动构建项目总结

## 项目概述

本项目为视美太 rk3399IoT-3399E 开发板提供了完整的 iStoreOS 固件自动化构建解决方案，基于 GitHub Actions 实现云端自动化编译。

## 项目结构



```
.

├── .github/

│   └── workflows/

│       └── build-istoreos.yml    # GitHub Actions工作流配置

├── diy-part1.sh                  # 自定义脚本1（源和包配置）

├── diy-part2.sh                  # 自定义脚本2（系统配置）

├── build.sh                      # 本地构建脚本

├── config.example                # 配置文件示例

├── README.md                     # 项目说明文档

├── LICENSE                       # 许可证文件

├── .gitignore                    # Git忽略文件

└── index.html                    # 项目展示网页
```

## 核心功能

### 1. 自动化构建



* **手动触发**：支持通过 GitHub Actions 页面手动启动构建

* **定时构建**：每周日自动构建最新固件

* **多类型构建**：release、debug、custom 三种构建模式

### 2. 灵活配置



* **基础配置**：管理 IP、子网掩码、主机名等

* **网络配置**：WiFi 设置、DNS 服务器、网络模式

* **功能模块**：Samba、FTP、DDNS、UPnP 等

### 3. 产物管理



* **自动打包**：生成 ZIP 和 TAR.GZ 格式压缩包

* **信息文件**：包含固件详细信息的说明文档

* **版本发布**：自动创建 GitHub Release

### 4. 硬件优化



* **RK3399 优化**：针对六核处理器进行性能优化

* **双千兆网口**：充分利用硬件网络性能

* **丰富接口**：支持 USB、UART、GPIO 等接口

## 使用方法

### 快速开始



1. **Fork 项目**到您的 GitHub 账号

2. **启动构建**：在 Actions 页面选择工作流并配置参数

3. **等待完成**：构建过程约需 2-4 小时

4. **下载固件**：在 Artifacts 或 Releases 页面获取固件

### 构建参数



* `build_type`：构建类型（release/debug/custom）

* `clean_build`：是否清理构建环境

* `upload_artifact`：是否上传构建产物

## 固件配置

### 默认配置



* **管理 IP**：192.168.100.1

* **用户名**：root

* **密码**：password

* **WiFi 名称**：iStoreOS-RK3399-2.4G / iStoreOS-RK3399-5G

* **时区**：Asia/Shanghai

### 包含功能



* ✅ LuCI Web 管理界面

* ✅ Samba 文件共享

* ✅ FTP 服务器

* ✅ DDNS 动态域名解析

* ✅ UPnP 自动端口映射

* ✅ 广告过滤（Adbyby Plus）

* ✅ 时间同步服务

* ✅ iStore 应用商店

## 技术特性

### 构建环境



* **操作系统**：Ubuntu 22.04 LTS

* **构建工具**：完整的 OpenWRT 编译工具链

* **缓存机制**：使用 CCache 加速编译

* **资源优化**：自动清理和资源管理

### 硬件支持



* **处理器**：RK3399 六核（A72×2 + A53×4）

* **内存**：4GB LPDDR4

* **存储**：8GB eMMC + MicroSD

* **网络**：双千兆以太网口

* **无线**：2.4G/5G WiFi

* **接口**：USB3.0、UART、GPIO 等

## 自定义扩展

### 修改配置



1. **工作流配置**：`.github/workflows/build-istoreos.yml`

2. **源配置**：`diy-part1.sh`（添加自定义 feed 源）

3. **系统配置**：`diy-part2.sh`（修改网络、系统参数）

### 添加软件包



```
\# 在工作流中添加

echo "CONFIG\_PACKAGE\_your-package=y" >> .config

\# 或在diy-part1.sh中添加

git clone https://github.com/your-repo/your-package.git package/your-package
```

## 部署说明

### 刷写方法

#### SD 卡刷写



1. 使用 BalenaEtcher 将 img 文件写入 SD 卡

2. 将 SD 卡插入开发板

3. 开机启动

#### eMMC 刷写



1. 使用 RK 烧录工具

2. 进入 MaskRom 模式

3. 选择固件文件进行烧录

### 首次配置



1. 连接开发板到网络

2. 访问管理 IP：[http://192.168.100.1](http://192.168.100.1)

3. 使用默认用户名密码登录

4. 根据向导完成基础配置

## 项目优势

### 1. 自动化程度高



* 一键启动构建，无需复杂操作

* 自动处理依赖和环境配置

* 智能缓存机制，加速重复构建

### 2. 配置灵活



* 丰富的配置选项

* 支持自定义软件包

* 可根据需求调整系统参数

### 3. 稳定可靠



* 基于成熟的 iStoreOS 源码

* 严格的构建流程和测试

* 完善的错误处理机制

### 4. 易于维护



* 清晰的项目结构

* 详细的文档说明

* 模块化的配置管理

## 注意事项

### 构建要求



* **GitHub Actions 配额**：每月至少 20 小时构建时间

* **网络连接**：稳定的网络环境

* **存储空间**：至少 20GB 可用空间

### 常见问题



1. **构建失败**：检查 GitHub Actions 配额和网络连接

2. **固件无法启动**：确认固件与硬件版本匹配

3. **网络配置问题**：检查 IP 地址和网络设置

4. **存储空间不足**：清理工作空间或增加存储

## 项目维护

### 更新机制



* **源码更新**：定期同步 iStoreOS 官方源码

* **依赖更新**：自动更新构建依赖包

* **安全更新**：及时应用安全补丁

### 版本管理



* **语义化版本**：遵循 v 主版本。次版本。修订版本

* **发布策略**：稳定版和测试版分离

* **变更记录**：详细的版本更新说明

## 许可证

本项目采用 MIT 许可证，详见 LICENSE 文件。

## 致谢

感谢以下项目和贡献者：



* [iStoreOS](https://github.com/istoreos/istoreos)

* [OpenWRT](https://openwrt.org/)

* [GitHub Actions](https://github.com/features/actions)

* [P3terx 的 Actions-OpenWRT 项目](https://github.com/P3TERX/Actions-OpenWRT)

## 联系方式

如有问题或建议，请通过以下方式联系：



* **GitHub Issues**：提交问题报告

* **Email**：contact@istoreos-build.com

* **项目主页**：[https://github.com/yourusername/istoreos-rk3399](https://github.com/yourusername/istoreos-rk3399)



***

**项目状态**：持续维护中

**最后更新**：2025-10-01

**版本**：v1.0.0

> （注：文档部分内容可能由 AI 生成）